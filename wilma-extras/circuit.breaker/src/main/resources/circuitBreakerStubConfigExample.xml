<?xml version="1.0" encoding="UTF-8"?>
<wilma-stub xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://epam.github.io/Wilma/xsd/StubConfig"
            xsi:schemaLocation="http://epam.github.io/Wilma/xsd/StubConfig http://epam.github.io/Wilma/xsd/StubConfig.xsd">
    <dialog-descriptor name="CircuitBreakerExampleConfiguration - main" usage="always" comment="Circuit Breaker">
        <condition-descriptor>
            <condition class="com.epam.wilma.extras.circuitBreaker.CircuitBreakerChecker">
                <param name="identifier" value="CB_1"/>
            </condition>
        </condition-descriptor>
        <response-descriptor code="503" delay="0" mimetype="text/plain" template="circuitBreakerTemplate">
        </response-descriptor>
    </dialog-descriptor>
    <dialog-descriptor name="CircuitBreakerExampleConfiguration - test" usage="always" comment="Circuit Breaker">
        <condition-descriptor>
            <condition class="com.epam.wilma.extras.circuitBreaker.CircuitBreakerChecker">
                <param name="identifier" value="CB_2"/>
            </condition>
        </condition-descriptor>
        <response-descriptor code="503" delay="0" mimetype="text/plain" template="circuitBreakerTemplate">
        </response-descriptor>
    </dialog-descriptor>
    <template-descriptor name="templateDescriptor1">
        <template name="circuitBreakerTemplate" type="text" resource="This is a Circuit Breaker test response."/>
    </template-descriptor>
    <interceptors>
        <interceptor name="Circuit Breaker Response Investigator"
                     class="com.epam.wilma.extras.circuitBreaker.CircuitBreakerInterceptor">
            <param name="identifier" value="CB_1"/>
            <param name="path" value="http://"/>
            <param name="timeoutInSec" value="15"/>
            <param name="successCodes" value="200,201,303"/>
            <param name="maxErrorCount" value="4"/>
        </interceptor>
        <interceptor name="Circuit Breaker Response Investigator"
                     class="com.epam.wilma.extras.circuitBreaker.CircuitBreakerInterceptor">
            <param name="identifier" value="CB_2"/>
            <param name="path" value="http://127.0.0.1/testUrl"/>
            <param name="timeoutInSec" value="15"/>
            <param name="successCodes" value="200,201,303"/>
            <param name="maxErrorCount" value="1"/>
        </interceptor>
    </interceptors>
</wilma-stub>