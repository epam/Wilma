/*==========================================================================
Copyright since 2013, EPAM Systems

This file is part of Wilma.

Wilma is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Wilma is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Wilma.  If not, see <http://www.gnu.org/licenses/>.
===========================================================================*/
plugins {
    id "org.sonarqube" version "3.2.0"
}

ext {
    nettyVersion = '4.1.65.Final'
    jettyVersion = '9.4.42.v20210604'
    jUnitVersion = '4.13.2'
    mockitoAllVersion = '1.10.19'
    mockitoCoreVersion = '3.3.3'
    orgSfl4jVersion = '1.7.30'
    logbackVersion = '1.2.3'
    googleGuavaApi = 'com.google.guava:guava:30.1.1-jre'
    componentName='wilma'
    javaxServletApi='javax.servlet:javax.servlet-api:3.1.0'
    javaxAnnotationApi='javax.annotation:javax.annotation-api:1.3.2'
}

apply from: 'common.gradle'

subprojects {
    apply from: "$rootDir/common.gradle"

    compileJava {options.encoding = "UTF-8"}

    subprojects {
        task allDeps(type: DependencyReportTask) {}
    }
}

sonarqube {
    properties {
        property "sonar.projectKey", "epam/Wilma"
        property "sonar.organization", "epam"
        property "sonar.host.url", "https://sonarcloud.io"
        property "sonar.java.checkstyle.reportPaths", "build/reports/checkstyle/main.xml"
        property "sonar.exclusions", "**/wilma-functionaltest/**/*"
    }
}
project.tasks["sonarqube"].onlyIf { project.hasProperty('systemProp.sonar.login') }

if (hasProperty('buildScan')) {
    buildScan {
        termsOfServiceUrl = 'https://gradle.com/terms-of-service'
        termsOfServiceAgree = 'yes'
    }
}
